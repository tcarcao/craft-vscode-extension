{
    "name": "craft",
    "displayName": "Craft Language",
    "description": "Syntax highlighting for Craft architecture language",
    "version": "0.0.1",
    "publisher": "tcarcao",
    "repository": {
        "type": "git",
        "url": "https://github.com/tcarcao/craft-vscode-extension.git"
    },
    "license": "MIT",
    "main": "./dist/client.js",
    "engines": {
        "vscode": "^1.75.0"
    },
    "dependencies": {
        "antlr4ng": "^3.0.16",
        "axios": "^1.0.0",
        "glob": "^11.0.3",
        "tree-sitter-craft": "^0.1.3",
        "vscode-languageclient": "^9.0.1",
        "vscode-languageserver": "^9.0.1",
        "vscode-languageserver-textdocument": "^1.0.12",
        "vscode-uri": "^3.1.0",
        "web-tree-sitter": "^0.20.8"
    },
    "scripts": {
        "vscode:prepublish": "npm run bundle",
        "compile": "npm run copy-tree-sitter && tsc -b && cd client && npm run compile",
        "copy-tree-sitter": "cp node_modules/tree-sitter-craft/tree-sitter-craft.wasm resources/ && cp -r node_modules/tree-sitter-craft/queries resources/queries",
        "watch": "tsc -b -w",
        "lint": "eslint",
        "postinstall": "cd client && npm install && cd ../server && npm install && cd .. && npm run copy-tree-sitter",
        "update-grammar": "./update-grammar.sh",
        "bundle": "npm run copy-tree-sitter && npm run bundle-client && npm run bundle-server && npm run bundle-webviews && npm run copy-static-assets",
        "bundle-client": "esbuild ./client/src/extension.ts --bundle --outfile=dist/client.js --external:vscode --format=cjs --platform=node --minify --loader:.wasm=file",
        "bundle-webviews": "mkdir -p dist/webview && esbuild ./client/src/webview/DomainsApp.tsx --bundle --outfile=dist/webview/domains.js --format=iife --platform=browser --minify && esbuild ./client/src/webview/ServicesApp.tsx --bundle --outfile=dist/webview/services.js --format=iife --platform=browser --minify",
        "copy-static-assets": "mkdir -p dist/styles dist/@vscode/codicons/dist dist/node_modules/web-tree-sitter && cp client/src/ui/styles/treeStyles.css dist/styles/ && cp -r client/node_modules/@vscode/codicons/dist/* dist/@vscode/codicons/dist/ && cp node_modules/web-tree-sitter/tree-sitter.wasm dist/node_modules/web-tree-sitter/ && cp node_modules/web-tree-sitter/tree-sitter.js dist/node_modules/web-tree-sitter/",
        "bundle-server": "esbuild ./server/src/server.ts --bundle --outfile=dist/server.js --external:vscode --format=cjs --platform=node --loader:.wasm=file",
        "dev": "npm run copy-tree-sitter && npm run copy-static-assets && npm run dev-client & npm run dev-server & npm run dev-webviews",
        "dev-client": "esbuild ./client/src/extension.ts --bundle --outfile=dist/client.js --external:vscode --format=cjs --platform=node --sourcemap --watch --loader:.wasm=file",
        "dev-webviews": "mkdir -p dist/webview && esbuild ./client/src/webview/DomainsApp.tsx --bundle --outfile=dist/webview/domains.js --format=iife --platform=browser --sourcemap --watch & esbuild ./client/src/webview/ServicesApp.tsx --bundle --outfile=dist/webview/services.js --format=iife --platform=browser --sourcemap --watch",
        "dev-server": "esbuild ./server/src/server.ts --bundle --outfile=dist/server.js --external:vscode --format=cjs --platform=node --sourcemap --watch --loader:.wasm=file",
        "debug": "npm run copy-tree-sitter && npm run copy-static-assets && npm run debug-webviews && npm run debug-client && npm run debug-server",
        "debug-client": "esbuild ./client/src/extension.ts --bundle --outfile=dist/client.js --external:vscode --format=cjs --platform=node --sourcemap --loader:.wasm=file",
        "debug-webviews": "mkdir -p dist/webview && esbuild ./client/src/webview/DomainsApp.tsx --bundle --outfile=dist/webview/domains.js --format=iife --platform=browser --sourcemap && esbuild ./client/src/webview/ServicesApp.tsx --bundle --outfile=dist/webview/services.js --format=iife --platform=browser --sourcemap",
        "debug-server": "esbuild ./server/src/server.ts --bundle --outfile=dist/server.js --external:vscode --format=cjs --platform=node --sourcemap --loader:.wasm=file"
    },
    "devDependencies": {
        "@eslint/js": "^9.13.0",
        "@stylistic/eslint-plugin": "^2.9.0",
        "@types/mocha": "^10.0.6",
        "@types/node": "^20",
        "@vscode/vsce": "^3.6.2",
        "esbuild": "^0.25.10",
        "eslint": "^9.13.0",
        "mocha": "^10.3.0",
        "typescript": "^5.6.2",
        "typescript-eslint": "^8.11.0"
    },
    "categories": [
        "Programming Languages"
    ],
    "contributes": {
        "configuration": {
            "title": "Craft Language",
            "properties": {
                "craft.server.url": {
                    "type": "string",
                    "default": "http://localhost:8080",
                    "description": "URL of the Craft server for diagram generation",
                    "pattern": "^https?:\\/\\/.+",
                    "patternErrorMessage": "Must be a valid HTTP or HTTPS URL"
                },
                "craft.server.timeout": {
                    "type": "number",
                    "default": 30000,
                    "minimum": 5000,
                    "maximum": 120000,
                    "description": "Timeout for server requests in milliseconds (5-120 seconds)"
                },
                "craft.downloadPath": {
                    "type": "string",
                    "default": "",
                    "description": "Default path for downloading diagram files. If empty, user will be prompted to choose location for each download."
                },
                "craft.logging.level": {
                    "type": "string",
                    "enum": [
                        "off",
                        "error",
                        "warn",
                        "info",
                        "debug",
                        "trace"
                    ],
                    "default": "warn",
                    "description": "Logging verbosity level. Use 'debug' or 'trace' for development and troubleshooting."
                }
            }
        },
        "languages": [
            {
                "id": "craft",
                "aliases": [
                    "Craft Language",
                    "craft"
                ],
                "extensions": [
                    ".craft"
                ],
                "configuration": "./language-configuration.json"
            }
        ],
        "semanticTokenTypes": [
            {
                "id": "craft-flow-keyword",
                "description": "Flow control keywords like use_case, when"
            },
            {
                "id": "craft-services-keyword",
                "description": "Services block keyword"
            },
            {
                "id": "craft-arch-keyword",
                "description": "Architecture block keyword"
            },
            {
                "id": "craft-exposure-keyword",
                "description": "Exposure block keyword"
            },
            {
                "id": "craft-domain-keyword",
                "description": "Domain block keyword"
            },
            {
                "id": "craft-actor-keyword",
                "description": "Actor block keyword"
            },
            {
                "id": "craft-actors-keyword",
                "description": "Actors block keyword"
            },
            {
                "id": "craft-actor-type",
                "description": "Actor type keywords (user, system, service)"
            },
            {
                "id": "craft-domains-property",
                "description": "Domains property keyword"
            },
            {
                "id": "craft-language-property",
                "description": "Language property keyword"
            },
            {
                "id": "craft-data-stores-property",
                "description": "Data stores property keyword"
            },
            {
                "id": "craft-to-property",
                "description": "To property keyword"
            },
            {
                "id": "craft-through-property",
                "description": "Through property keyword"
            },
            {
                "id": "craft-presentation-section",
                "description": "Presentation section keyword"
            },
            {
                "id": "craft-gateway-section",
                "description": "Gateway section keyword"
            },
            {
                "id": "craft-asks-verb",
                "description": "Asks action verb"
            },
            {
                "id": "craft-notifies-verb",
                "description": "Notifies action verb"
            },
            {
                "id": "craft-listens-verb",
                "description": "Listens action verb"
            },
            {
                "id": "craft-returns-verb",
                "description": "Returns action verb"
            },
            {
                "id": "craft-service-name",
                "description": "Service names"
            },
            {
                "id": "craft-domain-name",
                "description": "Domain definition names"
            },
            {
                "id": "craft-domain-list",
                "description": "Domain list values"
            },
            {
                "id": "craft-data-store-name",
                "description": "Data store names"
            },
            {
                "id": "craft-subdomain-name",
                "description": "Subdomain names"
            },
            {
                "id": "craft-component-name",
                "description": "Component names"
            },
            {
                "id": "craft-exposure-name",
                "description": "Exposure names"
            },
            {
                "id": "craft-language-value",
                "description": "Language values"
            },
            {
                "id": "craft-actor-name",
                "description": "Actor names (in use cases)"
            },
            {
                "id": "craft-actor-definition",
                "description": "Actor definition names"
            },
            {
                "id": "craft-regular-verb",
                "description": "Regular verbs"
            },
            {
                "id": "craft-phrase-word",
                "description": "Words in phrases"
            },
            {
                "id": "craft-connector-word",
                "description": "Connector words (a, an, the, to, from, etc.)"
            },
            {
                "id": "craft-modifier-key",
                "description": "Modifier keys"
            },
            {
                "id": "craft-modifier-value",
                "description": "Modifier values"
            },
            {
                "id": "craft-flow-arrow",
                "description": "Flow arrows"
            },
            {
                "id": "craft-usecase-string",
                "description": "Use case names"
            },
            {
                "id": "craft-event-string",
                "description": "Event strings"
            },
            {
                "id": "craft-regular-string",
                "description": "Regular strings"
            },
            {
                "id": "craft-comment",
                "description": "Comments"
            },
            {
                "id": "craft-braces",
                "description": "Braces"
            },
            {
                "id": "craft-colon",
                "description": "Colons"
            },
            {
                "id": "craft-comma",
                "description": "Commas"
            }
        ],
        "semanticTokenModifiers": [
            {
                "id": "declaration",
                "description": "When declaring something"
            },
            {
                "id": "definition",
                "description": "When defining a block"
            },
            {
                "id": "modification",
                "description": "Property assignments"
            },
            {
                "id": "static",
                "description": "Static keywords and operators"
            }
        ],
        "semanticTokenScopes": [
            {
                "language": "craft",
                "scopes": {
                    "craft-flow-keyword": [
                        "keyword.control.flow.craft"
                    ],
                    "craft-services-keyword": [
                        "keyword.control.services.craft"
                    ],
                    "craft-arch-keyword": [
                        "keyword.control.arch.craft"
                    ],
                    "craft-exposure-keyword": [
                        "keyword.control.exposure.craft"
                    ],
                    "craft-domain-keyword": [
                        "keyword.control.domain.craft"
                    ],
                    "craft-actor-keyword": [
                        "keyword.control.actor.craft"
                    ],
                    "craft-actors-keyword": [
                        "keyword.control.actors.craft"
                    ],
                    "craft-actor-type": [
                        "keyword.other.actor-type.craft"
                    ],
                    "craft-domains-property": [
                        "keyword.other.property.domains.craft"
                    ],
                    "craft-language-property": [
                        "keyword.other.property.language.craft"
                    ],
                    "craft-data-stores-property": [
                        "keyword.other.property.data-stores.craft"
                    ],
                    "craft-to-property": [
                        "keyword.other.property.to.craft"
                    ],
                    "craft-through-property": [
                        "keyword.other.property.through.craft"
                    ],
                    "craft-presentation-section": [
                        "keyword.other.section.presentation.craft"
                    ],
                    "craft-gateway-section": [
                        "keyword.other.section.gateway.craft"
                    ],
                    "craft-asks-verb": [
                        "keyword.other.asks.craft"
                    ],
                    "craft-notifies-verb": [
                        "keyword.other.notifies.craft"
                    ],
                    "craft-listens-verb": [
                        "keyword.other.listens.craft"
                    ],
                    "craft-returns-verb": [
                        "keyword.other.returns.craft"
                    ],
                    "craft-service-name": [
                        "entity.name.type.service.craft"
                    ],
                    "craft-domain-name": [
                        "entity.name.type.domain-name.craft"
                    ],
                    "craft-domain-list": [
                        "entity.name.type.domain.list.craft"
                    ],
                    "craft-data-store-name": [
                        "entity.name.type.datastore.craft"
                    ],
                    "craft-subdomain-name": [
                        "entity.name.type.subdomain.craft"
                    ],
                    "craft-component-name": [
                        "entity.name.type.component.craft"
                    ],
                    "craft-exposure-name": [
                        "entity.name.type.exposure.craft"
                    ],
                    "craft-language-value": [
                        "entity.name.type.language.craft"
                    ],
                    "craft-actor-name": [
                        "entity.name.class.actor.craft"
                    ],
                    "craft-actor-definition": [
                        "entity.name.type.actor-name.craft"
                    ],
                    "craft-regular-verb": [
                        "entity.name.function.verb.craft"
                    ],
                    "craft-phrase-word": [
                        "entity.name.variable.phrase.craft"
                    ],
                    "craft-connector-word": [
                        "keyword.other.connector.craft"
                    ],
                    "craft-modifier-key": [
                        "entity.name.tag.modifier.key.craft"
                    ],
                    "craft-modifier-value": [
                        "entity.name.tag.modifier.value.craft"
                    ],
                    "craft-flow-arrow": [
                        "punctuation.separator.arrow.craft"
                    ],
                    "craft-usecase-string": [
                        "string.quoted.double.usecase.craft"
                    ],
                    "craft-event-string": [
                        "string.quoted.double.event.craft"
                    ],
                    "craft-regular-string": [
                        "string.quoted.double.craft"
                    ],
                    "craft-comment": [
                        "comment.line.double-slash.craft"
                    ],
                    "craft-braces": [
                        "punctuation.section.braces.begin.craft"
                    ],
                    "craft-colon": [
                        "punctuation.separator.colon.craft"
                    ],
                    "craft-comma": [
                        "punctuation.separator.comma.craft"
                    ]
                }
            }
        ],
        "configurationDefaults": {
            "editor.semanticHighlighting.enabled": true,
            "editor.semanticTokenColorCustomizations": {
                "rules": {
                    "craft-flow-keyword": {
                        "foreground": "#800080",
                        "bold": true
                    },
                    "craft-services-keyword": {
                        "foreground": "#800080",
                        "bold": true
                    },
                    "craft-arch-keyword": {
                        "foreground": "#800080",
                        "bold": true
                    },
                    "craft-exposure-keyword": {
                        "foreground": "#800080",
                        "bold": true
                    },
                    "craft-domain-keyword": {
                        "foreground": "#800080",
                        "bold": true
                    },
                    "craft-actors-keyword": {
                        "foreground": "#800080",
                        "bold": true
                    },
                    "craft-actor-keyword": {
                        "foreground": "#800080",
                        "bold": true
                    },
                    "craft-domains-property": {
                        "foreground": "#d73a49",
                        "bold": true
                    },
                    "craft-language-property": {
                        "foreground": "#d73a49",
                        "bold": true
                    },
                    "craft-data-stores-property": {
                        "foreground": "#d73a49",
                        "bold": true
                    },
                    "craft-to-property": {
                        "foreground": "#d73a49",
                        "bold": true
                    },
                    "craft-through-property": {
                        "foreground": "#d73a49",
                        "bold": true
                    },
                    "craft-asks-verb": {
                        "foreground": "#e36209",
                        "bold": true
                    },
                    "craft-notifies-verb": {
                        "foreground": "#22863a",
                        "bold": true
                    },
                    "craft-listens-verb": {
                        "foreground": "#22863a",
                        "bold": true
                    },
                    "craft-returns-verb": {
                        "foreground": "#22863a",
                        "bold": true
                    },
                    "craft-regular-verb": {
                        "foreground": "#795e26",
                        "bold": true
                    },
                    "craft-actor-type": {
                        "foreground": "#d73a49",
                        "bold": true
                    },
                    "craft-connector-word": {
                        "foreground": "#6a737d"
                    },
                    "craft-usecase-string": {
                        "foreground": "#0070C1",
                        "bold": true
                    },
                    "craft-event-string": {
                        "foreground": "#001080",
                        "italic": true
                    },
                    "craft-regular-string": {
                        "foreground": "#a31515"
                    },
                    "craft-service-name": {
                        "foreground": "#0070C1",
                        "bold": true
                    },
                    "craft-domain-name": {
                        "foreground": "#0070C1",
                        "bold": true
                    },
                    "craft-exposure-name": {
                        "foreground": "#e36209",
                        "bold": true
                    },
                    "craft-subdomain-name": {
                        "foreground": "#22863a",
                        "bold": true
                    },
                    "craft-actor-definition": {
                        "foreground": "#0070C1",
                        "bold": true
                    },
                    "craft-domain-list": {
                        "foreground": "#267f99",
                        "bold": true
                    },
                    "craft-data-store-name": {
                        "foreground": "#6f42c1",
                        "bold": true
                    },
                    "craft-actor-name": {
                        "foreground": "#b8860b",
                        "bold": true
                    },
                    "craft-language-value": {
                        "foreground": "#6f42c1",
                        "bold": true
                    },
                    "craft-phrase-word": {
                        "foreground": "#a31515",
                        "italic": true
                    },
                    "craft-braces": {
                        "foreground": "#b8860b",
                        "bold": true
                    },
                    "craft-colon": {
                        "foreground": "#6a737d"
                    },
                    "craft-comma": {
                        "foreground": "#6a737d"
                    },
                    "craft-flow-arrow": {
                        "foreground": "#cf222e",
                        "bold": true
                    },
                    "craft-comment": {
                        "foreground": "#008000",
                        "italic": true
                    }
                }
            }
        },
        "commands": [
            {
                "command": "craft.previewC4",
                "title": "Craft: Preview C4 Diagram",
                "category": "Craft"
            },
            {
                "command": "craft.previewSelectedC4",
                "title": "Craft: Preview Selected C4 Diagram",
                "category": "Craft"
            },
            {
                "command": "craft.previewDomain",
                "title": "Craft: Preview Domain Diagram",
                "category": "Craft"
            },
            {
                "command": "craft.previewDomainsFromSelection",
                "title": "Craft: Preview Domain Diagram from selection",
                "category": "Craft"
            },
            {
                "command": "craft.openSettings",
                "title": "Craft: Open Settings",
                "category": "Craft"
            },
            {
                "command": "craft.selectAllDomains",
                "title": "Select All Domains",
                "icon": "$(checklist)"
            },
            {
                "command": "craft.selectNoneDomains",
                "title": "Clear Domain Selection",
                "icon": "$(clear-all)"
            },
            {
                "command": "craft.selectCurrentFileDomains",
                "title": "Select Current File Domains",
                "icon": "$(file)"
            },
            {
                "command": "craft.selectAllServices",
                "title": "Select All Services",
                "icon": "$(checklist)"
            },
            {
                "command": "craft.selectNoneServices",
                "title": "Clear Service Selection",
                "icon": "$(clear-all)"
            },
            {
                "command": "craft.refreshDomains",
                "title": "Refresh Domains",
                "icon": "$(refresh)"
            },
            {
                "command": "craft.previewDomains",
                "title": "Preview Domain Diagram",
                "icon": "$(preview)"
            },
            {
                "command": "craft.refreshServices",
                "title": "Refresh Services",
                "icon": "$(refresh)"
            },
            {
                "command": "craft.previewServices",
                "title": "Preview Services Diagram",
                "icon": "$(preview)"
            },
            {
                "command": "craft.toggleDomainOptions",
                "title": "Toggle Domain Diagram Options",
                "icon": "$(settings-gear)"
            },
            {
                "command": "craft.toggleServiceOptions",
                "title": "Toggle Service Diagram Options",
                "icon": "$(settings-gear)"
            }
        ],
        "keybindings": [
            {
                "command": "craft.previewC4",
                "key": "ctrl+shift+c"
            },
            {
                "command": "craft.previewDomain",
                "key": "ctrl+shift+d"
            }
        ],
        "viewsContainers": {
            "activitybar": [
                {
                    "id": "dslDomainContainer",
                    "title": "DSL Domains",
                    "icon": "resources/craft_icon.svg"
                }
            ]
        },
        "views": {
            "dslDomainContainer": [
                {
                    "id": "dslDomainView",
                    "name": "Domain Manager",
                    "type": "webview",
                    "icon": "resources/craft_icon.svg"
                },
                {
                    "id": "dslServicesView",
                    "name": "Services",
                    "type": "webview",
                    "icon": "resources/craft_icon.svg"
                }
            ]
        },
        "menus": {
            "view/title": [
                {
                    "command": "craft.selectAllDomains",
                    "when": "view == dslDomainView",
                    "group": "navigation@1"
                },
                {
                    "command": "craft.selectNoneDomains",
                    "when": "view == dslDomainView",
                    "group": "navigation@2"
                },
                {
                    "command": "craft.selectCurrentFileDomains",
                    "when": "view == dslDomainView",
                    "group": "navigation@3"
                },
                {
                    "command": "craft.selectAllServices",
                    "when": "view == dslServicesView",
                    "group": "navigation@1"
                },
                {
                    "command": "craft.selectNoneServices",
                    "when": "view == dslServicesView",
                    "group": "navigation@2"
                },
                {
                    "command": "craft.previewDomains",
                    "when": "view == dslDomainView",
                    "group": "navigation@4"
                },
                {
                    "command": "craft.toggleDomainOptions",
                    "when": "view == dslDomainView",
                    "group": "navigation@5"
                },
                {
                    "command": "craft.refreshDomains",
                    "when": "view == dslDomainView",
                    "group": "navigation@6"
                },
                {
                    "command": "craft.previewServices",
                    "when": "view == dslServicesView",
                    "group": "navigation@3"
                },
                {
                    "command": "craft.toggleServiceOptions",
                    "when": "view == dslServicesView",
                    "group": "navigation@4"
                },
                {
                    "command": "craft.refreshServices",
                    "when": "view == dslServicesView",
                    "group": "navigation@5"
                }
            ]
        }
    }
}
